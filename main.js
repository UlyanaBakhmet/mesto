(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r);if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===e(r)?r:String(r)}var n=function(){function e(t,n,o,i,u,c){var a,l,s,f=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=this,s=function(){f._element.remove(),f._element=null},(l=r(l="deleteMyCard"))in a?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s,this._dataCard=t,this._templateSelector=n,this._name=t.name,this._link=t.link,this._likes=t.likes,this._id=t._id,this._userId=c,this._ownerId=t.owner._id,this._handleCardClick=o,this._handleTrashClick=i,this._handleLikeClick=u}var n,o;return n=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"createCard",value:function(){return this._element=this._getTemplate(),this._cardTitle=this._element.querySelector(".card__name"),this._cardTitle.textContent=this._name,this._cardImage=this._element.querySelector(".card__image"),this._cardImage.alt=this._name,this._cardImage.src=this._link,this._buttonLike=this._element.querySelector(".card__like-button"),this._buttonDelete=this._element.querySelector(".card__button-delete"),this._setEventListeners(),this.setCardLike(this._likes),this._userId!==this._ownerId&&(this._buttonDelete.remove(),this._buttonDelete=null),this._element}},{key:"_activeLike",value:function(){this._buttonLike.classList.add("card__like-button_active")}},{key:"_deactiveLike",value:function(){this._buttonLike.classList.remove("card__like-button_active")}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"setCardLike",value:function(e){this._likes=e;var t=this._element.querySelector(".card__like-calculator");this.isLiked()?this._activeLike():this._deactiveLike(),t.textContent=this._likes.length}},{key:"_setEventListeners",value:function(){var e=this;this._cardImage.addEventListener("click",(function(){return e._handleCardClick(e._name,e._link)})),this._buttonLike.addEventListener("click",(function(){return e._handleLikeClick(e._id)})),this._buttonDelete.addEventListener("click",(function(){return e._handleTrashClick(e._id)}))}}])&&t(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===o(i)?i:String(i)),n)}var i}var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectors=t,this._form=r,this._inputSelector=this._selectors.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector))}var t,r;return t=e,(r=[{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_makeButtonActive",value:function(){this._buttonElement.classList.remove(this._selectors.inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"makeButtonNotActive",value:function(){this._buttonElement.classList.add(this._selectors.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.makeButtonNotActive():this._makeButtonActive()}},{key:"_showError",value:function(e,t){var r=this._selectors,n=r.inputErrorClass,o=r.errorClass,i=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(n),i.classList.add(o),i.textContent=t}},{key:"_hideError",value:function(e){var t=this._selectors,r=t.inputErrorClass,n=t.errorClass,o=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r),o.classList.remove(n),o.textContent=""}},{key:"resetErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideError(t),e._toggleButtonState()}))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),c={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_notactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_active"};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===a(o)?o:String(o)),n)}var o}var s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._container.append(t._renderer(e))}))}}])&&l(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===f(t)?t:String(t)}var h=function(){function e(t){var r,n,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=function(e){"Escape"===e.key&&i.close()},(n=y(n="_handleEscClose"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&p(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===d(o)?o:String(o)),n)}var o}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=m(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},v.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function S(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(o){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._handleFormSubmit=t,r._form=r._popup.querySelector(".popup__form"),r._inputList=r._form.querySelectorAll(".popup__input"),r._submitButton=r._form.querySelector(".popup__save-button"),r}return t=u,(r=[{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Сохранение...":"Сохранить"}},{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputList.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){e[t.name]&&(t.value=e[t.name])}))}},{key:"setEventListeners",value:function(){var e=this;v(g(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){v(g(u.prototype),"close",this).call(this),this._form.reset()}}])&&_(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===w(o)?o:String(o)),n)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=O(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},j.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function P(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(n);if(o){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return P(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._imgZoom=t._popup.querySelector(".popup__img"),t._imgFigcaption=t._popup.querySelector(".popup__figcaption"),t}return t=u,(r=[{key:"open",value:function(e,t){this._imgZoom.alt=e,this._imgZoom.src=t,this._imgFigcaption.textContent=e,j(C(u.prototype),"open",this).call(this)}}])&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===T(o)?o:String(o)),n)}var o}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=B(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},R.apply(this,arguments)}function B(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function A(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(o){var r=x(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return A(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._form=t._popup.querySelector(".popup__form"),t._confirmButton=t._popup.querySelector(".popup__save-button"),t}return t=u,(r=[{key:"renderLoading",value:function(e){this._confirmButton.textContent=e?"Удаление...":"Да"}},{key:"setSubmitHandlers",value:function(e){this._handleFormSubmit=e}},{key:"setEventListeners",value:function(){var e=this;R(x(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit()}))}}])&&I(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==V(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===V(o)?o:String(o)),n)}var o}var F=function(){function e(t){var r=t.userNameSelector,n=t.userProfessionSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(r),this._userProfession=document.querySelector(n),this._avatar=document.querySelector(o)}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{userName:this._userName.textContent,userProfession:this._userProfession.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about,n=e.avatar;this._userName.textContent=t,this._userProfession.textContent=r,this._avatar.src=n}}])&&U(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==H(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===H(o)?o:String(o)),n)}var o}var J=function(){function e(t){var r=t.url,n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=r,this._headers=n}var t,r;return t=e,(r=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUsersInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._getResponseData(t)}))}},{key:"editUsersInfo",value:function(e,t){var r=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return r._getResponseData(e)}))}},{key:"addNewCard",value:function(e,t){var r=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return r._getResponseData(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._getResponseData(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._getResponseData(e)}))}},{key:"editAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then((function(e){return t._getResponseData(e)}))}}])&&M(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=document.querySelector(".popup_type_user"),z=(G.querySelector(".popup__form_type_user"),G.querySelector(".popup__input_type_name"),G.querySelector(".popup__input_type_profession"),document.querySelector(".profile__add-button")),$=(document.querySelector(".close-user-popup"),document.querySelector(".close-card-popup"),document.querySelector(".close-img-popup"),document.querySelector(".popup_type_card")),K=($.querySelector(".popup__form_type_card"),document.querySelector(".elements__container"),document.querySelector(".card-template").content,document.querySelector(".popup_type_img"),document.querySelector(".popup__img"),document.querySelector(".popup__figcaption"),document.querySelector(".popup_type_edit-avatar")),Q=document.querySelector(".profile"),W=(Q.querySelector(".profile__name"),Q.querySelector(".profile__profession"),Q.querySelector(".profile__edit-button")),X=Q.querySelector(".profile__avatar-edit-button"),Y=(Q.querySelector(".profile__avatar"),document.querySelector(".popup__input_type_card-name"),document.querySelector(".popup__input_type_card-link"),G.querySelector(".popup__form")),ee=$.querySelector(".popup__form"),te=K.querySelector(".popup__form"),re=(document.querySelector(".profile__box"),document.querySelector(".popup_type_confirm"),new u(c,Y));re.enableValidation();var ne=new u(c,ee);ne.enableValidation();var oe,ie=new u(c,te);ie.enableValidation();var ue=new J({url:"https://mesto.nomoreparties.co/v1/cohort-54",headers:{authorization:"070a38fd-7788-4fe4-9dbb-7187d1c3352a","Content-Type":"application/json"}});Promise.all([ue.getUsersInfo(),ue.getInitialCards()]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,c=[],a=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{if(!a&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];oe=o._id,ce.setUserInfo(o),ae.renderItems(i)})).catch((function(e){return console.log(e)})).finally((function(){}));var ce=new F({userNameSelector:".profile__name",userProfessionSelector:".profile__profession",userAvatarSelector:".profile__avatar"}),ae=new s((function(e){return he(e)}),".elements__container"),le=new q(".popup_type_img");le.setEventListeners();var se=new N(".popup_type_confirm");se.setEventListeners();var fe=new k(".popup_type_user",(function(e){var t=e.userName,r=e.userProfession;fe.renderLoading(!0),ue.editUsersInfo(t,r).then((function(e){ce.setUserInfo(e),fe.close()})).catch((function(e){return console.log(e)})).finally((function(){return fe.renderLoading(!1)}))}));fe.setEventListeners();var pe=new k(".popup_type_edit-avatar",(function(e){pe.renderLoading(!0),ue.editAvatar(e).then((function(e){ce.setUserInfo(e),pe.close()})).catch((function(e){return console.log(e)})).finally((function(){return pe.renderLoading(!1)}))}));pe.setEventListeners();var ye=new k(".popup_type_card",(function(e){ye.renderLoading(!0);var t=e.name,r=e.link;ue.addNewCard(t,r).then((function(e){var t=he(e);ae.addItem(t),ne.makeButtonNotActive(),ye.close()})).catch((function(e){return console.log(e)})).finally((function(){return ye.renderLoading(!1)}))}));ye.setEventListeners();var he=function(e){var t=new n(e,".card-template",(function(e,t){le.open(e,t)}),(function(e){se.open(),se.setSubmitHandlers((function(){se.renderLoading(!0),ue.deleteCard(e).then((function(e){t.deleteMyCard(e),se.close()})).catch((function(e){return console.log(e)})).finally((function(){return se.renderLoading(!1)}))}))}),(function(e){t.isLiked()?ue.deleteLike(e).then((function(e){t.setCardLike(e.likes)})).catch((function(e){return console.log(e)})):ue.addLike(e).then((function(e){t.setCardLike(e.likes)})).catch((function(e){return console.log(e)}))}),oe);return t.createCard()};W.addEventListener("click",(function(){fe.setInputValues(ce.getUserInfo()),re.makeButtonNotActive(),re.resetErrors(),fe.open()})),z.addEventListener("click",(function(){ne.resetErrors(),ye.open()})),X.addEventListener("click",(function(){ie.resetErrors(),pe.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Li9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGFDYXJkLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZVRyYXNoQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgdXNlcklkKSB7XHJcbiAgICB0aGlzLl9kYXRhQ2FyZCA9IGRhdGFDYXJkO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGFDYXJkLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YUNhcmQubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YUNhcmQubGlrZXM7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGFDYXJkLl9pZDtcclxuXHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YUNhcmQub3duZXIuX2lkO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2sgPSBoYW5kbGVUcmFzaENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAvL9Cy0LXRgNC90ZHQvCDQlNCe0Jwt0Y3Quy3QvdGCINC60LDRgNGC0L7Rh9C60LhcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8v0LzQtdGC0L7QtCDRgdC+0LfQtNCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuXHJcbiAgICB0aGlzLl9idXR0b25MaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1kZWxldGVcIik7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuc2V0Q2FyZExpa2UodGhpcy5fbGlrZXMpO1xyXG5cclxuICAgIGlmICh0aGlzLl91c2VySWQgIT09IHRoaXMuX293bmVySWQpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLl9idXR0b25EZWxldGUgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfYWN0aXZlTGlrZSgpIHtcclxuICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9kZWFjdGl2ZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBpc0xpa2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKHVzZXJMaWtlKSA9PiB1c2VyTGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICAvL9GB0YfRkdGC0YfQuNC6INC70LDQudC60L7QslxyXG4gIHNldENhcmRMaWtlKG5ld0xpa2VzKSB7XHJcbiAgICB0aGlzLl9saWtlcyA9IG5ld0xpa2VzO1xyXG4gICAgY29uc3QgbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1jYWxjdWxhdG9yXCIpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9hY3RpdmVMaWtlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9kZWFjdGl2ZUxpa2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIGRlbGV0ZU15Q2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9pZClcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2sodGhpcy5faWQpXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCIvL9C60LvQsNGB0YEg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80YtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvcnMgPSBzZWxlY3RvcnM7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB0aGlzLl9zZWxlY3RvcnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvL9C/0YDQvtCy0LXRgNC60LAg0LLQsNC70LjQtNC90L7RgdGC0LhcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/Qv9GA0L7QstC10YDRj9C10Lwg0L3QsCDQvdC10L/RgNCw0LLQuNC70YzQvdGL0Lkg0LLQstC+0LRcclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8v0LDQutGC0LjQstC40YDRg9C10Lwg0LrQvdC+0L/QutGDINC+0YLQv9GA0LDQstC60LhcclxuICBfbWFrZUJ1dHRvbkFjdGl2ZSgpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZWxlY3RvcnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvL9Cx0LvQvtC60LjRgNGD0LXQvCDQutC90L7Qv9C60YMg0L7RgtC/0YDQsNCy0LrQuFxyXG4gIG1ha2VCdXR0b25Ob3RBY3RpdmUoKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvL9Ch0LzQtdC90LAg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuCDQvtGC0L/RgNCw0LLQutC4IC0g0LXRgdC70Lgg0YfRgtC+LdGC0L4g0L3QtSDRgtCw0LogLSDQutC90L7Qv9C60LAg0L3QtSDQsNC60YLQuNCy0L3QsFxyXG4gIC8v0JXRgdC70Lgg0LLRgdC1INC+0LogLSDQsNC60YLQuNCy0L3QsFxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLm1ha2VCdXR0b25Ob3RBY3RpdmUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX21ha2VCdXR0b25BY3RpdmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8v0L7RgtC+0LHRgNCw0LbQtdC90LjQtSDQvtGI0LjQsdC60LhcclxuICBfc2hvd0Vycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fc2VsZWN0b3JzO1xyXG4gICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5wdXRFcnJvckNsYXNzKTtcclxuXHJcbiAgICBlcnJvclNwYW4uY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIC8v0YHQutGA0YvQstCw0LXQvCDQvtGI0LjQsdC60LhcclxuICBfaGlkZUVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHRoaXMuX3NlbGVjdG9ycztcclxuICAgIGNvbnN0IGVycm9yU3BhbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcblxyXG4gICAgZXJyb3JTcGFuLmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvclNwYW4udGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLy/RhNGD0L3QutGG0LjRjyDRgdCx0YDQvtGB0LAg0L7RiNC40LHQvtC6XHJcbiAgcmVzZXRFcnJvcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG5cclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL9C30LDQv9GD0YHQutCw0LXQvCDQstCw0LvQuNC00LDRhtC40Y5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgZ3JpZFBob3RvMSA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvZ3JpZFBob3RvMS5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcclxuY29uc3QgZ3JpZFBob3RvMiA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvZ3JpZFBob3RvMi5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcclxuY29uc3QgZ3JpZFBob3RvMyA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvZ3JpZFBob3RvMy5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcclxuY29uc3QgZ3JpZFBob3RvNCA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvZ3JpZFBob3RvNC5qcGVnXCIsIGltcG9ydC5tZXRhLnVybCk7XHJcbmNvbnN0IGdyaWRQaG90bzUgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2dyaWRQaG90bzUuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XHJcbmNvbnN0IGdyaWRQaG90bzYgPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL2dyaWRQaG90bzYuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gICAge1xyXG4gICAgICAgICduYW1lJzogJ9Ca0LDRgNC10LvQuNGPJyxcclxuICAgICAgICAnbGluayc6ICcuL2ltYWdlcy9ncmlkUGhvdG8xLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgJ25hbWUnOiAn0JDRgdGC0YDQsNGF0LDQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuICAgICAgICAnbGluayc6ICcuL2ltYWdlcy9ncmlkUGhvdG8yLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgJ25hbWUnOiAn0JrQsNC80YfQsNGC0LrQsCcsXHJcbiAgICAgICAgJ2xpbmsnOiAnLi9pbWFnZXMvZ3JpZFBob3RvMy5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgICduYW1lJzogJ9CU0LDQs9C10YHRgtCw0L0nLFxyXG4gICAgICAgICdsaW5rJzogJy4vaW1hZ2VzL2dyaWRQaG90bzQuanBlZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgJ25hbWUnOiAn0JzRg9GA0LzQsNC90YHQuicsXHJcbiAgICAgICAgJ2xpbmsnOiAnLi9pbWFnZXMvZ3JpZFBob3RvNS5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgICduYW1lJzogJ9Cv0LrRg9GC0LjRjycsXHJcbiAgICAgICAgJ2xpbmsnOiAnLi9pbWFnZXMvZ3JpZFBob3RvNi5qcGcnXHJcbiAgICB9XHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybVZhbFNlbGVjdG9ycyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc2F2ZS1idXR0b25fbm90YWN0aXZlXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX2FjdGl2ZVwiLFxyXG4gIH07XHJcblxyXG4vL9GN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAg0JDQn9CYINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0YHQtdGA0LLQtdGA0L7QvFxyXG5leHBvcnQgY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gICAgdXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01NCcsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnMDcwYTM4ZmQtNzc4OC00ZmU0LTlkYmItNzE4N2QxYzMzNTJhJyxcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbiAgfTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgLy/QvNC10YLQvtC0INC/0YDQuNC90LjQvNCw0LXRgiDQlNCe0Jwt0Y3Quy3QvdGCINC4INC00L7QsdCw0LLQu9GP0LXRgiDQtdCz0L4g0LIg0LrQvtC90YLQtdC50L3QtdGAXHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcblxyXG4gIC8v0KTRg9C90LrRhtC40Y8g0L7RgtGA0LjRgdC+0LLQutC4INC90LDRh9Cw0LvRjNC90YvRhSDQtNCw0L3QvdGL0YVcclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvL9C+0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0LrRgNGL0YLQuNC1INC4ICDQt9Cw0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLy/QvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsFxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgLy/RgdC70YPRiNCw0YLQtdC70Ywg0LTQu9GPINC30LDQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINGH0LXRgNC10LcgRXNjYXBlXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICAvL9C30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgLy/Rg9C00LDQu9C10L3QuNC1INGB0LvRg9GI0LDRgtC10LvRjyDQtNC70Y8g0LfQsNC60YDRi9GC0LjRjyDRh9C10YDQtdC3INC60L3QvtC/0LrRgyBFc2NhcGVcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIC8v0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0YfQtdGA0LXQtyDQutC90L7Qv9C60YMgRXNjYXBlXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8v0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0YfQtdGA0LXQtyDQntCy0LXRgNC70LXQuVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3NhdmUtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QuNGC0YxcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8v0YQt0LjRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LTQsNC90L3Ri9GFINC40Lcg0LLRgdC10YUg0L/QvtC70LXQuSDRhNC+0YDQvNGLXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgLy8g0YHQtNC10LvQsNC70Lgg0L/Rg9GB0YLQvtC5INC+0LHRjNC10LrRglxyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKGRhdGFbaW5wdXQubmFtZV0pIHtcclxuICAgICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/RhC3QuNGPINC00L7QsdCw0LLQu9C10L3QuNGPINGB0LvRg9GI0LDRgtC10LvQtdC5XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvL9GB0LHRgNCw0YHRi9Cy0LDQtdC8INGC0LXQutGB0YIg0LIg0YTQvtGA0LzQsNGFXHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1nWm9vbSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZ1wiKTtcclxuICAgIHRoaXMuX2ltZ0ZpZ2NhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19maWdjYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgLy/QvtGC0LrRgNGL0YLRjCDRhNC+0YLQviDQtNC70Y8g0YPQstC10LvQuNGH0LXQvdC40Y8g0LrQsNGA0YLQuNC90LrQuFxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5faW1nWm9vbS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1nWm9vbS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1nRmlnY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9jb25maXJtQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZS1idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9jb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gXCLQo9C00LDQu9C10L3QuNC1Li4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gXCLQlNCwXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRIYW5kbGVycyhzdWJtaXRIYW5kbGVycykge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IHN1Ym1pdEhhbmRsZXJzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VyUHJvZmVzc2lvblNlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlclByb2Zlc3Npb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJQcm9mZXNzaW9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAvL9C40YHQv9C+0LvRjNC30YPQtdGCINC30L3QsNGH0LXQvdC40Y8g0LTQsNC90L3Ri9GFINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHVzZXJQcm9mZXNzaW9uOiB0aGlzLl91c2VyUHJvZmVzc2lvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xyXG4gICAgLy/Qv9GA0LjQvdC40LzQsNC10YIg0L3QvtCy0YvQtSDQtNCw0L3QvdGL0LUg0Lgg0LTQvtCx0LDQstC70Y/QtdGCINC40YUg0L3QsCDRgdGC0YDQsNC90LjRhtGDXHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl91c2VyUHJvZmVzc2lvbi50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9nZXRSZXNwb25zZURhdGEocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIC8v0L/QvtC70YPRh9Cw0LXQvCDQtNCw0L3QvdGL0LUg0YHQstC+0LXQs9C+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gIGdldFVzZXJzSW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIC8v0L/QvtC70YPRh9C10L3QuNC1INC60LDRgNGC0L7Rh9C10Log0L7RgiDRgdC10YDQstC10YDQsFxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcblxyXG4gIC8v0L7QsdC90L7QstC40YLRjCDQtNCw0L3QvdGL0LUg0YHQstC+0LXQs9C+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gIGVkaXRVc2Vyc0luZm8odXNlck5hbWUsIHVzZXJQcm9mZXNzaW9uKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiB1c2VyTmFtZSxcclxuICAgICAgICBhYm91dDogdXNlclByb2Zlc3Npb24sXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgfVxyXG5cclxuICAvL9C00L7QsdCw0LLQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRgyDQvdCwINGB0LXRgNCy0LXRgFxyXG4gIGFkZE5ld0NhcmQobmFtZSwgbGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgfVxyXG5cclxuICAvL9GD0LTQsNC70LjRgtGMINC60LDRgNGC0L7Rh9C60YNcclxuICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgfVxyXG5cclxuICAvL9C/0L7RgdGC0LDQstC40YLRjCDQutCw0YDRgtC+0YfQutC1INC70LDQudC6XHJcbiAgYWRkTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgLy/Rg9C00LDQu9C40YLRjCDRgSDQutCw0YDRgtC+0YfQutC4INC70LDQudC6XHJcbiAgZGVsZXRlTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgLy/QvtCx0L3QvtCy0LjRgtGMINGB0LLQvtC5INCw0LLQsNGC0LDRgFxyXG4gIGVkaXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXIubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICB9XHJcbn1cclxuIiwiLy/QuNC80L/QvtGA0YLQuNGA0YPQtdC8OlxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgZm9ybVZhbFNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgYXBpQ29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuY29uc3QgdXNlclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3VzZXJcIik7XHJcbmNvbnN0IHBvcHVwVXNlckZvcm0gPSB1c2VyUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX3VzZXJcIik7XHJcbmNvbnN0IHVzZXJOYW1lSW5wdXQgPSB1c2VyUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCIpO1xyXG5jb25zdCB1c2VyUHJvZmVzc2lvbklucHV0ID0gdXNlclBvcHVwLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2lucHV0X3R5cGVfcHJvZmVzc2lvblwiXHJcbik7XHJcblxyXG5jb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHVzZXJQb3B1cENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZS11c2VyLXBvcHVwXCIpO1xyXG5jb25zdCBjYXJkUG9wdXBDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2UtY2FyZC1wb3B1cFwiKTtcclxuY29uc3QgaW1nUG9wdXBDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2UtaW1nLXBvcHVwXCIpO1xyXG5cclxuY29uc3QgY2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2NhcmRcIik7XHJcbmNvbnN0IHBvcHVwQ2FyZEZvcm0gPSBjYXJkUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2NhcmRcIik7XHJcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY29udGFpbmVyXCIpO1xyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtdGVtcGxhdGVcIikuY29udGVudDtcclxuXHJcbmNvbnN0IHBvcHVwVHlwZUltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9pbWdcIik7XHJcbmNvbnN0IGltZ1pvb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWdcIik7XHJcbmNvbnN0IGltZ0ZpZ2NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19maWdjYXB0aW9uXCIpO1xyXG5jb25zdCBhdmF0YXJQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9lZGl0LWF2YXRhclwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVQcm9mZXNzaW9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3Byb2Zlc3Npb25cIik7XHJcbmNvbnN0IGJ1dHRvbkVkaXQgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGJ1dHRvbkVkaXRBdmF0YXIgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhdmF0YXJQcm9maWxlID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcclxuXHJcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2NhcmQtbmFtZVwiKTtcclxuY29uc3QgY2FyZExpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfY2FyZC1saW5rXCIpO1xyXG5cclxuY29uc3QgdXNlckZvcm0gPSB1c2VyUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuY29uc3QgY2FyZEZvcm0gPSBjYXJkUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuY29uc3QgYXZhdGFyRm9ybSA9IGF2YXRhclBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbmNvbnN0IGF2YXRhclByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19ib3hcIik7XHJcblxyXG5jb25zdCBjb25maXJtYXRpb25Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9jb25maXJtXCIpO1xyXG5cclxuLy/QstCw0LvQuNC00LDRhtC40Y9cclxuY29uc3QgcHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxTZWxlY3RvcnMsIHVzZXJGb3JtKTtcclxucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBjYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbFNlbGVjdG9ycywgY2FyZEZvcm0pO1xyXG5jYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxTZWxlY3RvcnMsIGF2YXRhckZvcm0pO1xyXG5hdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcclxuXHJcbi8vINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC90LDRh9Cw0LvRjNC90YvRhSDQtNCw0L3QvdGL0YVcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2Vyc0luZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuICAudGhlbigoW21lLCBjYXJkc10pID0+IHtcclxuICAgIHVzZXJJZCA9IG1lLl9pZDtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG1lKTtcclxuICAgIHNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgLmZpbmFsbHkoKCkgPT4ge30pO1xyXG5cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgdXNlclByb2Zlc3Npb25TZWxlY3RvcjogXCIucHJvZmlsZV9fcHJvZmVzc2lvblwiLFxyXG4gIHVzZXJBdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAoY2FyZCkgPT4gY3JlYXRlTmV3Q2FyZChjYXJkKSxcclxuICBcIi5lbGVtZW50c19fY29udGFpbmVyXCJcclxuKTtcclxuXHJcblxyXG5jb25zdCBvcGVuUGhvdG9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX2ltZ1wiKTtcclxub3BlblBob3RvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5jb25zdCBwb3B1cFdpdGhDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiLnBvcHVwX3R5cGVfY29uZmlybVwiKTtcclxucG9wdXBXaXRoQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuY29uc3QgcG9wdXBVc2VyRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfdXNlclwiLCAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IHsgdXNlck5hbWUsIHVzZXJQcm9mZXNzaW9uIH0gPSBkYXRhO1xyXG4gIHBvcHVwVXNlckVkaXQucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5lZGl0VXNlcnNJbmZvKHVzZXJOYW1lLCB1c2VyUHJvZmVzc2lvbilcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgICBwb3B1cFVzZXJFZGl0LmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cFVzZXJFZGl0LnJlbmRlckxvYWRpbmcoZmFsc2UpKTtcclxufSk7XHJcbnBvcHVwVXNlckVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5jb25zdCBwb3B1cEF2YXRhckVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2VkaXQtYXZhdGFyXCIsIChkYXRhKSA9PiB7XHJcbiAgcG9wdXBBdmF0YXJFZGl0LnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuZWRpdEF2YXRhcihkYXRhKVxyXG4gICAgLnRoZW4oKGZvcm1EYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGZvcm1EYXRhKTtcclxuICAgICAgcG9wdXBBdmF0YXJFZGl0LmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cEF2YXRhckVkaXQucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xyXG59KTtcclxucG9wdXBBdmF0YXJFZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuY29uc3QgcG9wdXBBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9jYXJkXCIsIChkYXRhQ2FyZCkgPT4ge1xyXG4gIHBvcHVwQWRkQ2FyZC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGNvbnN0IHsgbmFtZSwgbGluayB9ID0gZGF0YUNhcmQ7XHJcbiAgYXBpXHJcbiAgICAuYWRkTmV3Q2FyZChuYW1lLCBsaW5rKVxyXG4gICAgLnRoZW4oKG5ld0RhdGFDYXJkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVOZXdDYXJkKG5ld0RhdGFDYXJkKTtcclxuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG4gICAgICBjYXJkVmFsaWRhdG9yLm1ha2VCdXR0b25Ob3RBY3RpdmUoKTtcclxuICAgICAgcG9wdXBBZGRDYXJkLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cEFkZENhcmQucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xyXG59KTtcclxucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuY29uc3QgY3JlYXRlTmV3Q2FyZCA9IChkYXRhQ2FyZCkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGRhdGFDYXJkLFxyXG4gICAgXCIuY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgKG5hbWUsIGxpbmspID0+IHtcclxuICAgICAgb3BlblBob3RvUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcclxuICAgIH0sXHJcbiAgICAoaWQpID0+IHtcclxuICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLm9wZW4oKTtcclxuICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLnNldFN1Ym1pdEhhbmRsZXJzKCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24ucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5kZWxldGVDYXJkKGlkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLmRlbGV0ZU15Q2FyZChyZXMpO1xyXG4gICAgICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24uY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHBvcHVwV2l0aENvbmZpcm1hdGlvbi5yZW5kZXJMb2FkaW5nKGZhbHNlKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIChpZCkgPT4ge1xyXG4gICAgICBpZiAoIWNhcmQuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuYWRkTGlrZShpZClcclxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQuc2V0Q2FyZExpa2UoZGF0YS5saWtlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmRlbGV0ZUxpa2UoaWQpXHJcbiAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLnNldENhcmRMaWtlKGRhdGEubGlrZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVzZXJJZFxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xyXG59O1xyXG5cclxuXHJcbi8v0LrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y9cclxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwVXNlckVkaXQuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbiAgcHJvZmlsZVZhbGlkYXRvci5tYWtlQnV0dG9uTm90QWN0aXZlKCk7XHJcbiAgcHJvZmlsZVZhbGlkYXRvci5yZXNldEVycm9ycygpO1xyXG4gIHBvcHVwVXNlckVkaXQub3BlbigpO1xyXG59KTtcclxuXHJcbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNhcmRWYWxpZGF0b3IucmVzZXRFcnJvcnMoKTtcclxuICBwb3B1cEFkZENhcmQub3BlbigpO1xyXG59KTtcclxuXHJcbmJ1dHRvbkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhdmF0YXJWYWxpZGF0b3IucmVzZXRFcnJvcnMoKTtcclxuICBwb3B1cEF2YXRhckVkaXQub3BlbigpO1xyXG59KTsiXSwibmFtZXMiOlsiQ2FyZCIsImRhdGFDYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVRyYXNoQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ1c2VySWQiLCJfZWxlbWVudCIsInJlbW92ZSIsInRoaXMiLCJfZGF0YUNhcmQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2lkIiwiX3VzZXJJZCIsIl9vd25lcklkIiwib3duZXIiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVRyYXNoQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsIl9jYXJkSW1hZ2UiLCJhbHQiLCJzcmMiLCJfYnV0dG9uTGlrZSIsIl9idXR0b25EZWxldGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzZXRDYXJkTGlrZSIsImNsYXNzTGlzdCIsImFkZCIsInNvbWUiLCJ1c2VyTGlrZSIsIm5ld0xpa2VzIiwibGlrZUNvdW50ZXIiLCJpc0xpa2VkIiwiX2FjdGl2ZUxpa2UiLCJfZGVhY3RpdmVMaWtlIiwibGVuZ3RoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJzZWxlY3RvcnMiLCJmb3JtIiwiX3NlbGVjdG9ycyIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfaGFzSW52YWxpZElucHV0IiwibWFrZUJ1dHRvbk5vdEFjdGl2ZSIsIl9tYWtlQnV0dG9uQWN0aXZlIiwiZXJyb3JNZXNzYWdlIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImVycm9yU3BhbiIsImlkIiwiZm9yRWFjaCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJmb3JtVmFsU2VsZWN0b3JzIiwiZm9ybVNlbGVjdG9yIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsInByZXBlbmQiLCJpdGVtcyIsImFwcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImtleSIsImNsb3NlIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uIiwiaXNMb2FkaW5nIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImRhdGEiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1nWm9vbSIsIl9pbWdGaWdjYXB0aW9uIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX2NvbmZpcm1CdXR0b24iLCJzdWJtaXRIYW5kbGVycyIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJQcm9mZXNzaW9uU2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlclByb2Zlc3Npb24iLCJfYXZhdGFyIiwidXNlck5hbWUiLCJ1c2VyUHJvZmVzc2lvbiIsImFib3V0IiwiYXZhdGFyIiwiQXBpIiwidXJsIiwiaGVhZGVycyIsIl91cmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfZ2V0UmVzcG9uc2VEYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1c2VyUG9wdXAiLCJidXR0b25BZGQiLCJjYXJkUG9wdXAiLCJhdmF0YXJQb3B1cCIsInByb2ZpbGUiLCJidXR0b25FZGl0IiwiYnV0dG9uRWRpdEF2YXRhciIsInVzZXJGb3JtIiwiY2FyZEZvcm0iLCJhdmF0YXJGb3JtIiwicHJvZmlsZVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJjYXJkVmFsaWRhdG9yIiwiYXZhdGFyVmFsaWRhdG9yIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldFVzZXJzSW5mbyIsImdldEluaXRpYWxDYXJkcyIsIm1lIiwiY2FyZHMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwic2VjdGlvbiIsInJlbmRlckl0ZW1zIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNhcmQiLCJjcmVhdGVOZXdDYXJkIiwib3BlblBob3RvUG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwV2l0aENvbmZpcm1hdGlvbiIsInBvcHVwVXNlckVkaXQiLCJyZW5kZXJMb2FkaW5nIiwiZWRpdFVzZXJzSW5mbyIsInBvcHVwQXZhdGFyRWRpdCIsImVkaXRBdmF0YXIiLCJmb3JtRGF0YSIsInBvcHVwQWRkQ2FyZCIsImFkZE5ld0NhcmQiLCJuZXdEYXRhQ2FyZCIsImFkZEl0ZW0iLCJvcGVuIiwic2V0U3VibWl0SGFuZGxlcnMiLCJkZWxldGVDYXJkIiwiZGVsZXRlTXlDYXJkIiwiZGVsZXRlTGlrZSIsImFkZExpa2UiLCJjcmVhdGVDYXJkIiwic2V0SW5wdXRWYWx1ZXMiLCJnZXRVc2VySW5mbyIsInJlc2V0RXJyb3JzIl0sInNvdXJjZVJvb3QiOiIifQ==